var app=app||{};app.modules=app.modules||[],function(){function e(){if(!app.state)return void console.error("State module not found!");for(key in app.modules)app.modules.hasOwnProperty(key)&&(app.modules[key]=t(key));app.state.emit(app.state.APP_START)}function t(e){var t=app.modules.dataprovider,a=app.modules.dataconverter,p=app.modules.datafilter,o=app.modules.searchfieldcontainer;switch(e){case"datamodel":return app.modules[e](t,a,p);case"pageparser":return app.modules[e](o);default:return}}document.addEventListener("DOMContentLoaded",e)}();var app=app||{};app.modules=app.modules||[],app.modules.appcomponent=function(){var e={createNew:function(e){return e}};return e};var Site=Site||{};Site.model=Site.model||{},Site.dataConverter=function(e){};var app=app||{};app.modules=app.modules||[],app.modules.searchfield=function(){var e={createNew:function(e){return e}};return e};var app=app||{};app.modules=app.modules||[],app.modules.searchfieldcontainer=function(){function e(){t()}function t(){clearTimeout(o),setTimeout(a,100)}function a(){var e,t,a,o,n=[];for(e=0;e<p.length;e++)t={},a=p[e].dataset.filterComponent,o=p[e].value,t[a]=o,n.push(t);app.state.emit(app.state.FILTER_DATA_CHANGED,n)}var p,o,n={init:function(t){var a;for(p=t,a=0;a<p.length;a++)p[a].addEventListener("change",e)}};return n};var app=app||{};app.modules=app.modules||[],app.modules.dataConverter=function(){function e(e,t,a){return e.hasOwnProperty(t)?e[t]:a}var t=[],a={convert:function(a){var p,o;if(!a||!a.length)return 0;for(o=0;o<a.length;o++)p={},p.color=e("color",""),p.model=e("type",""),p.year=parseInt(e("yearOfConstruction",""),2),p.price=parseInt(e("price",""),2),p.notes=e("notes",""),t.push(p)}};return a};var app=app||{};app.modules=app.modules||[],app.modules.dataprovider=function(){function e(e){var t;t=e,a=t,p(a)}function t(e){var t={carStock:[{color:"red",type:"Porsche 911",yearOfConstruction:2e3,price:6e4},{color:"black",type:"Porsche Panamera",yearOfConstruction:2010,price:12e4},{color:"green",type:"VW Beetle",yearOfConstruction:1960,price:8e3,notes:"damaged at the front bumper"},{color:"blue",type:"Audi A5",yearOfConstruction:1998,price:28345},{color:"yellow",type:"Ferrari 430 Spider",yearOfConstruction:1990,price:80435},{color:"gray",type:"Audi Commodore",yearOfConstruction:1992,price:8212}]};e(t)}var a,p,o={getData:function(a){p=a,t(e)}};return o};var app=app||{};app.modules=app.modules||[],app.modules.datafilter=function(e){function t(t){var o=e.getFullData();a(o,t,p)}function a(e,t,a){a(e)}function p(e){o=e,app.state.emit(app.state.SEARCH_RESULTS_UPDATED,o)}if(app.state){var o;app.state.on(app.state.FILTER_DATA_CHANGED,t)}};var app=app||{};app.modules=app.modules||[],app.modules.datamodel=function(e,t,a){function p(){o()}function o(){console.log("dataProvider is ",e),e.getData(n)}function n(e){i=t.convert(e),i&&app.state.emit(app.state.DATA_READY,i)}function r(e){a.filter(i,e,u)}function u(e){s=e,app.state.emit(app.state.SEARCH_RESULTS_UPDATED,s)}if(console.log("dataProvider is ",e),app.state){app.state.on(app.state.APP_START,p);var i,s;app.state.on(app.state.FILTER_DATA_CHANGED,r)}};var app=app||{};app.modules=app.modules||[],app.modules.pageparser=function(e){function t(){a()}function a(){var t,a=document.querySelectorAll("[data-component]");for(t=0;t<a.length;t++){var n,r=a[t],u=r.getAttribute("data-component");app.modules[u]&&(n=app.modules[u].createNew(r),o.push(n),r.getAttribute("data-filter-component")&&p.push(n))}e.init(p)}if(app.state){app.state.on(app.state.APP_START,t);var p,o=[]}};var app=app||{};app.state=function(){var e=[],t={APP_START:"PAGE_READY",DATA_READY:"DATA_READY",FILTER_DATA_CHANGED:"FILTER_DATA_CHANGED",SEARCH_RESULTS_UPDATED:"SEARCH_RESULTS_UPDATED",emit:function(t,a){var p,o,n;if(console.log("event emitted: ",t),e[t])for(o=e[t],p=0;p<o.length;p++)(n=o[p])(a)},on:function(t,a){e[t]||(e[t]=[]),e[t].push(a)}};return t}();